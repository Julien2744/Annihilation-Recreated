execute if block ~ ~ ~ air unless block ~ ~ ~ light run setblock ~ ~ ~ light[level=7]

execute if score #anniR_global anniR_difficulty matches 0 run summon bat ~ ~ ~ {OnGround:1b,NoGravity:0b,Silent:1b,Invulnerable:1b,DeathLootTable:"minecraft:empty",PersistenceRequired:1b,NoAI:1b,CanPickUpLoot:0b,Tags:["anni_immune","eye_plat"],Passengers:[{id:"minecraft:skeleton",NoGravity:1b,DeathLootTable:"minecraft:empty",PersistenceRequired:1b,Health:40f,Tags:["anni_immune"],HandItems:[{id:"minecraft:bow",Count:1b,tag:{Enchantments:[{id:"minecraft:power",lvl:7s},{id:"minecraft:flame",lvl:2s}]}},{}],HandDropChances:[0.000F,0.085F],ArmorItems:[{},{},{},{id:"minecraft:player_head",Count:1b,tag:{SkullOwner:{Id:[I;1058920221,1405175447,-2141444793,293571166],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvNzc0YTNiODEyYmNhM2FhYjQ0NTQ5NzAyYWQ1NmYzMmY0Mzk1MjIwNzMyMjBkODU0NTBlNDQyZGMyZTE3MzMzIn19fQ=="}]}}}}],ArmorDropChances:[0.085F,0.085F,0.085F,0.000F],ActiveEffects:[{Id:12,Amplifier:5b,Duration:-1,ShowParticles:0b},{Id:14,Amplifier:1b,Duration:-1,ShowParticles:0b}],Attributes:[{Name:generic.max_health,Base:40},{Name:generic.follow_range,Base:100},{Name:generic.armor,Base:5}]}],ActiveEffects:[{Id:14,Amplifier:1b,Duration:-1,ShowParticles:0b}]}
execute if score #anniR_global anniR_difficulty matches 1 run summon bat ~ ~ ~ {OnGround:1b,NoGravity:0b,Silent:1b,Invulnerable:1b,DeathLootTable:"minecraft:empty",PersistenceRequired:1b,NoAI:1b,CanPickUpLoot:0b,Tags:["anni_immune","eye_plat"],Passengers:[{id:"minecraft:skeleton",NoGravity:1b,DeathLootTable:"minecraft:empty",PersistenceRequired:1b,Health:55f,Tags:["anni_immune"],HandItems:[{id:"minecraft:bow",Count:1b,tag:{Enchantments:[{id:"minecraft:power",lvl:12s},{id:"minecraft:flame",lvl:2s}]}},{}],HandDropChances:[0.000F,0.085F],ArmorItems:[{},{},{},{id:"minecraft:player_head",Count:1b,tag:{SkullOwner:{Id:[I;1058920221,1405175447,-2141444793,293571166],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvNzc0YTNiODEyYmNhM2FhYjQ0NTQ5NzAyYWQ1NmYzMmY0Mzk1MjIwNzMyMjBkODU0NTBlNDQyZGMyZTE3MzMzIn19fQ=="}]}}}}],ArmorDropChances:[0.085F,0.085F,0.085F,0.000F],ActiveEffects:[{Id:12,Amplifier:5b,Duration:-1,ShowParticles:0b},{Id:14,Amplifier:1b,Duration:-1,ShowParticles:0b}],Attributes:[{Name:generic.max_health,Base:55},{Name:generic.follow_range,Base:100},{Name:generic.armor,Base:10}]}],ActiveEffects:[{Id:14,Amplifier:1b,Duration:-1,ShowParticles:0b}]}
execute if score #anniR_global anniR_difficulty matches 2 run summon bat ~ ~ ~ {OnGround:1b,NoGravity:0b,Silent:1b,Invulnerable:1b,DeathLootTable:"minecraft:empty",PersistenceRequired:1b,NoAI:1b,CanPickUpLoot:0b,Tags:["anni_immune","eye_plat"],Passengers:[{id:"minecraft:skeleton",NoGravity:1b,DeathLootTable:"minecraft:empty",PersistenceRequired:1b,Health:70f,Tags:["anni_immune"],HandItems:[{id:"minecraft:bow",Count:1b,tag:{Enchantments:[{id:"minecraft:power",lvl:19s},{id:"minecraft:flame",lvl:2s}]}},{}],HandDropChances:[0.000F,0.085F],ArmorItems:[{},{},{},{id:"minecraft:player_head",Count:1b,tag:{SkullOwner:{Id:[I;1058920221,1405175447,-2141444793,293571166],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvNzc0YTNiODEyYmNhM2FhYjQ0NTQ5NzAyYWQ1NmYzMmY0Mzk1MjIwNzMyMjBkODU0NTBlNDQyZGMyZTE3MzMzIn19fQ=="}]}}}}],ArmorDropChances:[0.085F,0.085F,0.085F,0.000F],ActiveEffects:[{Id:12,Amplifier:5b,Duration:-1,ShowParticles:0b},{Id:14,Amplifier:1b,Duration:-1,ShowParticles:0b}],Attributes:[{Name:generic.max_health,Base:70},{Name:generic.follow_range,Base:100},{Name:generic.armor,Base:20}]}],ActiveEffects:[{Id:14,Amplifier:1b,Duration:-1,ShowParticles:0b}]}

damage @e[type=skeleton,distance=..1,limit=1,sort=nearest,tag=anni_immune] 0 mob_attack by @e[tag=anni_target,distance=..128,limit=1]