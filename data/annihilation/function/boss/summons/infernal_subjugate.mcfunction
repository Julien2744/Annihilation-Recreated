execute if score #anniR.global anniR.difficulty matches 0 run summon wither_skeleton ~ ~ ~ {NoGravity:1b,Glowing:1b,PersistenceRequired:1b,NoAI:1b,CanPickUpLoot:0b,Health:60f,Tags:["anniR.immune","anniR.summoned"],Passengers:[{id:"minecraft:end_crystal",Silent:1b,Invulnerable:1b,Tags:["anniR.immune","anniR.summoned","anniR.regen"],ShowBottom:0b}],ArmorItems:[{id:"minecraft:netherite_boots",count:1,components:{"minecraft:trim":{material:"minecraft:redstone",pattern:"minecraft:flow"}}},{id:"minecraft:netherite_leggings",count:1,components:{"minecraft:unbreakable":{},"minecraft:trim":{material:"minecraft:gold",pattern:"minecraft:snout"}}},{},{id:"minecraft:golden_helmet",count:1,components:{"minecraft:unbreakable":{},"minecraft:trim":{material:"minecraft:redstone",pattern:"minecraft:silence"}}}],ArmorDropChances:[0.085F,0.000F,0.085F,0.000F],attributes:[{id:"minecraft:generic.max_health",base:60},{id:"minecraft:generic.scale",base:1.3}]}
execute if score #anniR.global anniR.difficulty matches 1 run summon wither_skeleton ~ ~ ~ {NoGravity:1b,Glowing:1b,PersistenceRequired:1b,NoAI:1b,CanPickUpLoot:0b,Health:100f,Tags:["anniR.immune","anniR.summoned"],Passengers:[{id:"minecraft:end_crystal",Silent:1b,Invulnerable:1b,Tags:["anniR.immune","anniR.summoned","anniR.regen"],ShowBottom:0b}],ArmorItems:[{id:"minecraft:netherite_boots",count:1,components:{"minecraft:trim":{material:"minecraft:redstone",pattern:"minecraft:flow"}}},{id:"minecraft:netherite_leggings",count:1,components:{"minecraft:unbreakable":{},"minecraft:trim":{material:"minecraft:gold",pattern:"minecraft:snout"}}},{},{id:"minecraft:golden_helmet",count:1,components:{"minecraft:unbreakable":{},"minecraft:trim":{material:"minecraft:redstone",pattern:"minecraft:silence"}}}],ArmorDropChances:[0.085F,0.000F,0.085F,0.000F],attributes:[{id:"minecraft:generic.max_health",base:100},{id:"minecraft:generic.scale",base:1.3}]}
execute if score #anniR.global anniR.difficulty matches 2 run summon wither_skeleton ~ ~ ~ {NoGravity:1b,Glowing:1b,PersistenceRequired:1b,NoAI:1b,CanPickUpLoot:0b,Health:150f,Tags:["anniR.immune","anniR.summoned"],Passengers:[{id:"minecraft:end_crystal",Silent:1b,Invulnerable:1b,Tags:["anniR.immune","anniR.summoned","anniR.regen"],ShowBottom:0b}],ArmorItems:[{id:"minecraft:netherite_boots",count:1,components:{"minecraft:trim":{material:"minecraft:redstone",pattern:"minecraft:flow"}}},{id:"minecraft:netherite_leggings",count:1,components:{"minecraft:unbreakable":{},"minecraft:trim":{material:"minecraft:gold",pattern:"minecraft:snout"}}},{},{id:"minecraft:golden_helmet",count:1,components:{"minecraft:unbreakable":{},"minecraft:trim":{material:"minecraft:redstone",pattern:"minecraft:silence"}}}],ArmorDropChances:[0.085F,0.000F,0.085F,0.000F],attributes:[{id:"minecraft:generic.max_health",base:150},{id:"minecraft:generic.scale",base:1.3}]}

tp @n[type=wither_skeleton,tag=anniR.immune,tag=anniR.summoned,distance=..2] ~ ~ ~ facing entity @e[type=item_display,tag=aj.annihilation_recreated.root,distance=..90,limit=1]

#end crystal beam
execute if score #anniR.global anniR.subjugate_beam matches 1 run data merge entity @n[type=end_crystal,distance=..6,tag=anniR.immune,tag=anniR.regen] {beam_target:[I;0,0,0]}
execute if score #anniR.global anniR.subjugate_beam matches 1 run execute as @n[type=end_crystal,distance=..6,tag=anniR.immune,tag=anniR.regen] store result entity @s beam_target[0] double 1 run data get entity @e[type=item_display,tag=aj.annihilation_recreated.root,distance=..90,limit=1] Pos[0]
execute if score #anniR.global anniR.subjugate_beam matches 1 run execute as @n[type=end_crystal,distance=..6,tag=anniR.immune,tag=anniR.regen] store result entity @s beam_target[1] double 1 run data get entity @e[type=item_display,tag=aj.annihilation_recreated.root,distance=..90,limit=1] Pos[1]
execute if score #anniR.global anniR.subjugate_beam matches 1 run execute as @n[type=end_crystal,distance=..6,tag=anniR.immune,tag=anniR.regen] store result entity @s beam_target[2] double 1 run data get entity @e[type=item_display,tag=aj.annihilation_recreated.root,distance=..90,limit=1] Pos[2]

execute store result score #anniR.global anniR.checkMobGrief run gamerule mobGriefing
execute if score #anniR.global anniR.checkMobGrief matches 1 run fill ~-1 ~-1 ~-1 ~1 ~-1 ~1 minecraft:netherrack destroy
execute if score #anniR.global anniR.checkMobGrief matches 1 run fill ~-1 ~3 ~-1 ~1 ~ ~1 minecraft:air destroy

execute if score #anniR.global anniR.team matches 1 run team join annihilation_team @n[type=wither_skeleton,tag=anniR.immune,tag=anniR.summoned,distance=..2]
execute if score #anniR.global anniR.team matches 1 run team join annihilation_team @n[type=end_crystal,tag=anniR.immune,tag=anniR.summoned,distance=..6]